<?php
/**	op-module-tutorial:/content/left.php
 *
 * Once you complete the mandatory tutorials, optional tutorials will be unlocked.
 *
 * @created    2025-07-27
 * @version    1.0
 * @package    op-module-tutorial
 * @author     Tomoaki Nagahara
 * @copyright  Tomoaki Nagahara All right reserved.
 */

/**	namespace
 *
 */
namespace OP;

//	...
$args = OP()->Unit()->Router()->Args();
$arg0 = $args[0] ?? null;

//	...
if( $arg0 ){
	OP()->Session()->Set(md5($arg0), true);
}

//	...
$unlock = null;

//	Core Tutorials
$list[0] = [
	'app'      => 'App',
	'request'  => 'Request',
	'router'   => 'Router',
	'cicd'     => 'CI/CD',
	'D'        => 'D()',
	'OP'       => 'OP()',
];

//	Bonus Tutorials
$list[1] = [
	'newworld' => 'NEW WORLD',
	'config'   => 'Config',
	'layout'   => 'Layout',
	'error'    => 'Error',
	'notice'   => 'Notice',
	'html_pass-through' => 'HTML Pass-through',
	'api'      => 'API',
	'ci'       => 'CI',
	'cd'       => 'CD',
	'form'     => 'Form',
	'database' => 'Database',
	'template' => 'Template',
	'unit'     => 'Unit',
	'module'   => 'Module',
	'webpack'  => 'WebPack',
];

//	Default icon
$lock = 'ðŸ“–';
?>
<ul class="menu left">
<?php foreach([0,1] as $i): ?>
	<?php foreach( $list[$i] as $dir => $label ): ?>
		<li>
			<?php
			//	...
			$icon = $lock;
			$href = null;
			$hash = md5($dir);
			$session = OP()->Session()->Get($hash);
			$cookie  = OP()->Cookie()->Get("op-tutorial-{$dir}");

			//	...
			if( $session ){
				$icon = 'ðŸ›¶';
			}

			//	...
			if( $cookie ){
				$icon = 'âœ…';
			}

			//	...
			if( $cookie or $unlock ){
				$href = OP()->URL("tutorial:/{$dir}/");
			}

			//	...
			if( $href ){
				echo "<span class='icon'>{$icon}</span><a href='{$href}'>{$label}</a>";
			}else{
				echo "<span class='icon'>{$icon}</span><span>{$label}</span>";
			}
			?>
		</li>
	<?php endforeach; ?>

	<!-- unlock -->
	<?php if( $i === 0 ): ?>
		<?php
		$unlock = OP()->Cookie()->Get("op-tutorial-{$dir}");
		$lock = $unlock ? 'ðŸ”“':'ðŸ”’';
		?>
		<hr/>
	<?php endif; ?>

<?php endforeach; ?>
</ul>
